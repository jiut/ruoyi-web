# 环境变量配置说明

## 概述

项目已经支持通过环境变量 `VITE_USE_MOCK_DATA` 来切换数据源，可以在开发环境使用模拟数据，在生产环境使用真实的后端API。

## 环境变量配置

### 主要环境变量

| 变量名 | 说明 | 默认值 | 可选值 |
|--------|------|--------|--------|
| `VITE_USE_MOCK_DATA` | 是否使用模拟数据 | `true` | `true` / `false` |
| `VITE_APP_API_BASE_URL` | 后端API基础URL | `http://localhost:8080` | 任意有效URL |
| `VITE_GLOB_API_URL` | 全局API URL | `http://localhost:8080` | 任意有效URL |

### 配置文件

在项目根目录创建以下文件：

#### `.env` (通用配置)
```bash
# 数据源配置
VITE_USE_MOCK_DATA=true

# API 配置
VITE_APP_API_BASE_URL=http://localhost:8080
VITE_GLOB_API_URL=http://localhost:8080

# 应用配置
VITE_GLOB_APP_TITLE="星海人才"
VITE_GLOB_APP_SHORT_NAME="星海人才"
VITE_GLOB_APP_PWA=false
```

#### `.env.development` (开发环境)
```bash
# 开发环境配置
VITE_USE_MOCK_DATA=true
VITE_APP_API_BASE_URL=http://localhost:8080
VITE_GLOB_API_URL=http://localhost:8080
```

#### `.env.production` (生产环境)
```bash
# 生产环境配置
VITE_USE_MOCK_DATA=false
VITE_APP_API_BASE_URL=https://api.xinghairencai.com
VITE_GLOB_API_URL=https://api.xinghairencai.com
```

## 工作原理

### 1. 设计师模块

- **API层** (`src/api/talent/designer.ts`): 根据 `VITE_USE_MOCK_DATA` 自动切换数据源
- **Composable层** (`src/composables/talent/useDesigner.ts`): 提供统一的数据接口
- **页面层** (`src/views/talent/designers/index.vue`): 使用composable获取数据

### 2. 岗位模块

- **Composable层** (`src/composables/talent/useJob.ts`): 已经实现环境变量切换
- 类似的模式可以应用到其他模块

## 切换数据源

### 使用模拟数据 (开发模式)

```bash
# 在 .env 文件中设置
VITE_USE_MOCK_DATA=true
```

**特点:**
- 使用本地模拟数据
- 支持完整的筛选和搜索功能
- 无需启动后端服务
- 数据响应快速

### 使用后端API (生产模式)

```bash
# 在 .env 文件中设置
VITE_USE_MOCK_DATA=false
VITE_APP_API_BASE_URL=https://your-api-domain.com
```

**特点:**
- 连接真实后端API
- 数据实时更新
- 支持完整的CRUD操作
- 需要后端服务支持

## 调试信息

在开发环境中，控制台会输出环境变量的调试信息：

```
🔍 设计师API环境变量调试信息:
  VITE_USE_MOCK_DATA: true
  USE_MOCK_DATA: true

🔧 使用模拟数据 - 设计师列表
```

或

```
🚀 使用后端API - 设计师列表
```

## 注意事项

1. **环境变量优先级**: `.env.local` > `.env.production` > `.env.development` > `.env`

2. **重启服务**: 修改环境变量后需要重启开发服务器

3. **类型安全**: API接口保持一致，无论使用哪种数据源

4. **错误处理**: 在API模式下，确保后端服务可用并返回正确的数据格式

5. **性能考虑**: 模拟数据模式下会添加人工延迟来模拟真实网络请求

## 开发建议

1. **开发阶段**: 使用 `VITE_USE_MOCK_DATA=true` 进行快速开发和测试
2. **集成测试**: 切换到 `VITE_USE_MOCK_DATA=false` 测试API集成
3. **生产部署**: 确保环境变量设置为 `VITE_USE_MOCK_DATA=false`

## 扩展其他模块

如需为其他模块添加环境变量切换功能，请参考已实现的模块：

1. 在API文件中添加环境变量检查
2. 在composable中实现数据源切换逻辑
3. 在页面中使用composable而不是直接导入mock数据

这样可以确保整个应用的数据源管理统一且可配置。
