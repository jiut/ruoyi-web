# 数据库字段必填项对照表

本文档对照数据库表结构，明确前端表单中的必填项和选填项设置。

## 📝 教育背景表 (des_education)

### 数据库字段约束

| 字段名 | 数据类型 | 约束 | 说明 | 前端状态 |
|--------|---------|------|------|----------|
| `education_id` | bigint | NOT NULL AUTO_INCREMENT | 主键，自动生成 | 无需前端输入 |
| `designer_id` | bigint | NOT NULL | 设计师ID | 系统自动填入 |
| `school` | varchar(100) | NOT NULL | 学校名称 | ✅ 必填 |
| `degree` | varchar(50) | NOT NULL | 学位 | ✅ 必填 |
| `major` | varchar(100) | NOT NULL | 专业 | ✅ 必填 |
| `start_date` | date | NOT NULL | 开始日期 | ✅ 必填 |
| `end_date` | date | NULL | 结束日期 | 可选 |
| `is_current` | tinyint(1) | NULL DEFAULT 0 | 是否在读 | 可选 |
| `description` | text | NULL | 描述 | 可选 |
| `gpa` | decimal(3,2) | NULL | GPA | 可选 |
| `ranking` | int | NULL | 排名 | 可选 |
| `total_students` | int | NULL | 总人数 | 可选 |

### 前端验证规则

```typescript
interface EducationValidation {
  school: { required: true, maxlength: 100 },
  degree: { required: true, maxlength: 50 },
  major: { required: true, maxlength: 100 },
  startDate: { required: true, type: 'date' },
  endDate: { type: 'date' },
  gpa: { min: 0, max: 5, step: 0.01 },
  ranking: { min: 1, type: 'integer' },
  totalStudents: { min: 1, type: 'integer' }
}
```

## 💼 工作经历表 (des_work_experience)

### 数据库字段约束

| 字段名 | 数据类型 | 约束 | 说明 | 前端状态 |
|--------|---------|------|------|----------|
| `experience_id` | bigint | NOT NULL AUTO_INCREMENT | 主键，自动生成 | 无需前端输入 |
| `designer_id` | bigint | NOT NULL | 设计师ID | 系统自动填入 |
| `company` | varchar(100) | NOT NULL | 公司名称 | ✅ 必填 |
| `position` | varchar(100) | NOT NULL | 职位名称 | ✅ 必填 |
| `start_date` | date | NOT NULL | 开始日期 | ✅ 必填 |
| `end_date` | date | NULL | 结束日期 | 可选 |
| `is_current` | tinyint(1) | NULL DEFAULT 0 | 是否当前工作 | 可选 |
| `description` | text | NULL | 工作描述 | 可选 |
| `location` | varchar(100) | NULL | 工作地点 | 可选 |
| `industry` | varchar(50) | NULL | 行业类型 | 可选 |

### 前端验证规则

```typescript
interface WorkExperienceValidation {
  company: { required: true, maxlength: 100 },
  position: { required: true, maxlength: 100 },
  startDate: { required: true, type: 'date' },
  endDate: { type: 'date' },
  location: { maxlength: 100 },
  industry: { maxlength: 50 }
}
```

## 🔧 修改记录

### 2024年修改内容

1. **教育背景表单修改**：
   - ✅ `degree` 字段：添加必填标记和 `required` 属性
   - ✅ `start_date` 字段：添加必填标记和 `required` 属性

2. **工作经历表单修改**：
   - ✅ `start_date` 字段：添加必填标记和 `required` 属性

### 前端实现特性

1. **智能功能**：
   - 自动计算工作时长显示
   - 排名百分比自动计算
   - 在读/在职状态智能切换

2. **用户体验优化**：
   - 分组显示相关字段
   - 可选字段明确标注
   - 提供示例和占位符文本

## 📊 完整性评分规则

```typescript
const calculateEducationScore = (education: Education) => {
  let score = 0;

  // 必填项完成度 (60%)
  if (education.school && education.degree && education.major && education.startDate) {
    score += 60;
  }

  // 可选项完善度 (40%)
  if (education.description) score += 10;
  if (education.gpa) score += 10;
  if (education.ranking && education.totalStudents) score += 10;
  if (education.endDate || education.isCurrent) score += 10;

  return Math.min(score, 100);
};

const calculateWorkExperienceScore = (experience: WorkExperience) => {
  let score = 0;

  // 必填项完成度 (70%)
  if (experience.company && experience.position && experience.startDate) {
    score += 70;
  }

  // 可选项完善度 (30%)
  if (experience.description) score += 15;
  if (experience.location) score += 5;
  if (experience.industry) score += 5;
  if (experience.endDate || experience.isCurrent) score += 5;

  return Math.min(score, 100);
};
```

## ⚠️ 注意事项

1. **数据库约束优先级最高**：前端验证必须与数据库NOT NULL约束保持一致
2. **用户体验考虑**：虽然数据库允许NULL，但部分字段仍建议引导用户填写
3. **渐进式完善**：用户可以先填写必填项完成基础注册，后续再补充详细信息
4. **数据完整性**：系统会根据填写完整度给出相应的档案完整度评分

## 🔄 同步检查清单

在修改表单时，请确保以下步骤：

- [ ] 检查数据库表结构的NOT NULL约束
- [ ] 更新前端表单的必填标记 (`<span class="text-red-500">*</span>`)
- [ ] 添加HTML5 `required` 属性
- [ ] 更新TypeScript接口定义
- [ ] 测试表单验证逻辑
- [ ] 更新用户提示文本
