# ç»‘å®šå·²æœ‰ä¼ä¸šæˆ–é™¢æ ¡ä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

è®¾è®¡å¸ˆç®¡ç†æ¨¡å—æ”¯æŒä¸¤ç§èº«ä»½ç»‘å®šæ–¹å¼ï¼š
1. **æ³¨å†Œæ–°å®ä½“å¹¶ç»‘å®š**ï¼šåˆ›å»ºæ–°çš„ä¼ä¸š/é™¢æ ¡å¹¶è‡ªåŠ¨ç»‘å®šåˆ°å½“å‰ç”¨æˆ·
2. **ç»‘å®šå·²æœ‰å®ä½“**ï¼šç”¨æˆ·é€‰æ‹©ç³»ç»Ÿä¸­å·²å­˜åœ¨çš„ä¼ä¸š/é™¢æ ¡è¿›è¡Œç»‘å®š

æœ¬æŒ‡å—ä¸»è¦ä»‹ç»å¦‚ä½•ç»‘å®šå·²æœ‰çš„ä¼ä¸šæˆ–é™¢æ ¡ã€‚

## ğŸ”„ ç»‘å®šæ–¹å¼å¯¹æ¯”

### æ³¨å†Œæ–°å®ä½“å¹¶ç»‘å®šï¼ˆåŸæœ‰æ–¹å¼ï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šä¼ä¸š/é™¢æ ¡é¦–æ¬¡æ³¨å†Œç³»ç»Ÿ
- **æƒé™è¦æ±‚**ï¼šä»…éœ€ç™»å½•
- **æ“ä½œæµç¨‹**ï¼šå¡«å†™å®Œæ•´ä¿¡æ¯ â†’ åˆ›å»ºå®ä½“ â†’ è‡ªåŠ¨ç»‘å®š

### ç»‘å®šå·²æœ‰å®ä½“ï¼ˆæ–°å¢æ–¹å¼ï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šä¼ä¸š/é™¢æ ¡å·²åœ¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦åŠ å…¥
- **æƒé™è¦æ±‚**ï¼šç™»å½• + éªŒè¯æœºåˆ¶ï¼ˆé‚€è¯·ç /å­¦å·ç­‰ï¼‰
- **æ“ä½œæµç¨‹**ï¼šæŸ¥æ‰¾å®ä½“ â†’ éªŒè¯èº«ä»½ â†’ ç»‘å®šå…³ç³»

## ğŸ¯ ç»‘å®šå·²æœ‰ä¼ä¸š

### 1. æŸ¥çœ‹å¯ç»‘å®šçš„ä¼ä¸šåˆ—è¡¨

**æ¥å£**: `GET /designer/user/available/enterprises`

**å‚æ•°**:
- `pageNum` (å¯é€‰): é¡µç ï¼Œé»˜è®¤1
- `pageSize` (å¯é€‰): æ¯é¡µå¤§å°ï¼Œé»˜è®¤10  
- `enterpriseName` (å¯é€‰): ä¼ä¸šåç§°æ¨¡ç³ŠæŸ¥è¯¢

**ç¤ºä¾‹è¯·æ±‚**:
```bash
GET /designer/user/available/enterprises?pageNum=1&pageSize=10&enterpriseName=ç§‘æŠ€
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "enterpriseId": 1,
        "enterpriseName": "å­—èŠ‚è·³åŠ¨ç§‘æŠ€æœ‰é™å…¬å¸",
        "description": "å…¨çƒé¢†å…ˆçš„ç§»åŠ¨äº’è”ç½‘å…¬å¸",
        "industry": "äº’è”ç½‘",
        "scale": "5000+",
        "address": "åŒ—äº¬å¸‚æµ·æ·€åŒº"
      },
      {
        "enterpriseId": 2,
        "enterpriseName": "è…¾è®¯ç§‘æŠ€æœ‰é™å…¬å¸",
        "description": "ä¸­å›½é¢†å…ˆçš„äº’è”ç½‘å¢å€¼æœåŠ¡æä¾›å•†",
        "industry": "äº’è”ç½‘",
        "scale": "5000+",
        "address": "æ·±åœ³å¸‚å—å±±åŒº"
      }
    ],
    "total": 2,
    "size": 10,
    "current": 1,
    "pages": 1
  }
}
```

### 2. ç»‘å®šåˆ°æŒ‡å®šä¼ä¸š

**æ¥å£**: `POST /designer/user/bind/enterprise`

**å‚æ•°**:
- `enterpriseId` (å¿…é¡»): ä¼ä¸šID
- `inviteCode` (å¯é€‰): ä¼ä¸šé‚€è¯·ç 

**ç¤ºä¾‹è¯·æ±‚**:
```bash
POST /designer/user/bind/enterprise?enterpriseId=1&inviteCode=INVITE123
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "ç»‘å®šä¼ä¸šæˆåŠŸ",
  "data": null
}
```

**é”™è¯¯æƒ…å†µ**:
```json
{
  "code": 500,
  "msg": "ç”¨æˆ·å·²ç»‘å®šä¼ä¸šèº«ä»½ï¼Œè¯·å…ˆè§£ç»‘åå†ç»‘å®š",
  "data": null
}
```

## ğŸ« ç»‘å®šå·²æœ‰é™¢æ ¡

### 1. æŸ¥çœ‹å¯ç»‘å®šçš„é™¢æ ¡åˆ—è¡¨

**æ¥å£**: `GET /designer/user/available/schools`

**å‚æ•°**:
- `pageNum` (å¯é€‰): é¡µç ï¼Œé»˜è®¤1
- `pageSize` (å¯é€‰): æ¯é¡µå¤§å°ï¼Œé»˜è®¤10
- `schoolName` (å¯é€‰): é™¢æ ¡åç§°æ¨¡ç³ŠæŸ¥è¯¢

**ç¤ºä¾‹è¯·æ±‚**:
```bash
GET /designer/user/available/schools?pageNum=1&pageSize=10&schoolName=è®¾è®¡
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "schoolId": 1,
        "schoolName": "æ¸…åå¤§å­¦ç¾æœ¯å­¦é™¢",
        "description": "ä¸­å›½è‘—åçš„è‰ºæœ¯è®¾è®¡é™¢æ ¡",
        "schoolType": "å…¬ç«‹",
        "level": "985",
        "address": "åŒ—äº¬å¸‚æµ·æ·€åŒºæ¸…åå›­1å·"
      },
      {
        "schoolId": 2,
        "schoolName": "ä¸­å¤®ç¾æœ¯å­¦é™¢",
        "description": "ä¸­å›½å†å²æœ€æ‚ ä¹…çš„ç¾æœ¯é™¢æ ¡",
        "schoolType": "å…¬ç«‹",
        "level": "211",
        "address": "åŒ—äº¬å¸‚æœé˜³åŒºèŠ±å®¶åœ°å—è¡—8å·"
      }
    ],
    "total": 2,
    "size": 10,
    "current": 1,
    "pages": 1
  }
}
```

### 2. ç»‘å®šåˆ°æŒ‡å®šé™¢æ ¡

**æ¥å£**: `POST /designer/user/bind/school`

**å‚æ•°**:
- `schoolId` (å¿…é¡»): é™¢æ ¡ID
- `studentId` (å¯é€‰): å­¦å·

**ç¤ºä¾‹è¯·æ±‚**:
```bash
POST /designer/user/bind/school?schoolId=1&studentId=2020001234
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "ç»‘å®šé™¢æ ¡æˆåŠŸ",
  "data": null
}
```

## ğŸ” ç®¡ç†å‘˜ç»‘å®šæ¥å£

å¯¹äºç®¡ç†å‘˜ï¼Œè¿˜æä¾›äº†ç›´æ¥ç»‘å®šç”¨æˆ·åˆ°ä»»æ„å®ä½“çš„æ¥å£ï¼š

**æ¥å£**: `POST /designer/user/bind`

**æƒé™**: `designer:user:bind`

**å‚æ•°**:
- `userId` (å¿…é¡»): ç”¨æˆ·ID
- `entityType` (å¿…é¡»): å®ä½“ç±»å‹ (`designer`/`enterprise`/`school`)
- `entityId` (å¿…é¡»): å®ä½“ID

**ç¤ºä¾‹è¯·æ±‚**:
```bash
POST /designer/user/bind?userId=123&entityType=enterprise&entityId=1
```

## ğŸ“ ä½¿ç”¨æµç¨‹ç¤ºä¾‹

### åœºæ™¯1ï¼šå‘˜å·¥åŠ å…¥å·²æœ‰ä¼ä¸š

1. **æŸ¥è¯¢ä¼ä¸šåˆ—è¡¨**
   ```bash
   GET /designer/user/available/enterprises?enterpriseName=å­—èŠ‚è·³åŠ¨
   ```

2. **é€‰æ‹©ç›®æ ‡ä¼ä¸š** (ä¾‹å¦‚ä¼ä¸šIDä¸º1)

3. **ç»‘å®šä¼ä¸š**
   ```bash
   POST /designer/user/bind/enterprise?enterpriseId=1&inviteCode=HR2024
   ```

4. **éªŒè¯ç»‘å®šç»“æœ**
   ```bash
   GET /designer/user/enterprise/profile
   ```

### åœºæ™¯2ï¼šå­¦ç”Ÿç»‘å®šé™¢æ ¡

1. **æŸ¥è¯¢é™¢æ ¡åˆ—è¡¨**
   ```bash
   GET /designer/user/available/schools?schoolName=æ¸…å
   ```

2. **é€‰æ‹©ç›®æ ‡é™¢æ ¡** (ä¾‹å¦‚é™¢æ ¡IDä¸º1)

3. **ç»‘å®šé™¢æ ¡**
   ```bash
   POST /designer/user/bind/school?schoolId=1&studentId=2020001234
   ```

4. **éªŒè¯ç»‘å®šç»“æœ**
   ```bash
   GET /designer/user/school/profile
   ```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç»‘å®šé™åˆ¶
- æ¯ä¸ªç”¨æˆ·åœ¨åŒä¸€å®ä½“ç±»å‹ä¸‹åªèƒ½ç»‘å®šä¸€ä¸ªå®ä½“
- å¦‚éœ€åˆ‡æ¢ç»‘å®šï¼Œå¿…é¡»å…ˆè§£ç»‘å½“å‰å®ä½“

### 2. è§£ç»‘æ“ä½œ
åœ¨ç»‘å®šæ–°å®ä½“å‰ï¼Œå¦‚æœå·²æœ‰ç»‘å®šï¼Œéœ€è¦å…ˆè§£ç»‘ï¼š

```bash
# è§£ç»‘ä¼ä¸šèº«ä»½
PUT /designer/user/unbind/enterprise

# è§£ç»‘é™¢æ ¡èº«ä»½  
PUT /designer/user/unbind/school
```

### 3. èº«ä»½éªŒè¯ï¼ˆå¾…å®Œå–„ï¼‰
å½“å‰ç‰ˆæœ¬çš„é‚€è¯·ç å’Œå­¦å·éªŒè¯é€»è¾‘å°šæœªå®ç°ï¼Œä»¥ä¸‹åŠŸèƒ½åœ¨åç»­ç‰ˆæœ¬ä¸­ä¼šå®Œå–„ï¼š

- **ä¼ä¸šé‚€è¯·ç éªŒè¯**ï¼šä¼ä¸šå¯ç”Ÿæˆé‚€è¯·ç ä¾›å‘˜å·¥ä½¿ç”¨
- **å­¦å·éªŒè¯**ï¼šä¸é™¢æ ¡å­¦ç±ç³»ç»Ÿå¯¹æ¥éªŒè¯å­¦ç”Ÿèº«ä»½
- **å®¡æ‰¹æµç¨‹**ï¼šç®¡ç†å‘˜å®¡æ‰¹ç»‘å®šç”³è¯·

### 4. æƒé™è€ƒè™‘
- æ™®é€šç”¨æˆ·åªèƒ½ç»‘å®šè‡ªå·±çš„èº«ä»½
- ç®¡ç†å‘˜å¯ä»¥ä¸ºä»»æ„ç”¨æˆ·ç»‘å®šèº«ä»½
- æŸäº›æ•æ„Ÿæ“ä½œå¯èƒ½éœ€è¦é¢å¤–çš„éªŒè¯æ­¥éª¤

## ğŸ” æŸ¥çœ‹å½“å‰ç»‘å®šçŠ¶æ€

### è·å–æ‰€æœ‰ç»‘å®šä¿¡æ¯
```bash
GET /designer/user/bindings
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "bindingId": 1,
      "userId": 123,
      "entityType": "designer",
      "entityId": 456,
      "bindingStatus": "1"
    },
    {
      "bindingId": 2,
      "userId": 123,
      "entityType": "enterprise",
      "entityId": 1,
      "bindingStatus": "1"
    }
  ]
}
```

### è·å–å…·ä½“èº«ä»½æ¡£æ¡ˆ
```bash
# è®¾è®¡å¸ˆæ¡£æ¡ˆ
GET /designer/user/designer/profile

# ä¼ä¸šæ¡£æ¡ˆ
GET /designer/user/enterprise/profile

# é™¢æ ¡æ¡£æ¡ˆ
GET /designer/user/school/profile
```

## ğŸš€ å‰ç«¯é›†æˆå»ºè®®

### 1. ä¼ä¸šé€‰æ‹©ç»„ä»¶
```javascript
// è·å–ä¼ä¸šåˆ—è¡¨
const getEnterpriseList = async (params) => {
    const response = await api.get('/designer/user/available/enterprises', { params });
    return response.data;
};

// ç»‘å®šä¼ä¸š
const bindEnterprise = async (enterpriseId, inviteCode) => {
    const response = await api.post('/designer/user/bind/enterprise', null, {
        params: { enterpriseId, inviteCode }
    });
    return response.data;
};
```

### 2. é™¢æ ¡é€‰æ‹©ç»„ä»¶
```javascript
// è·å–é™¢æ ¡åˆ—è¡¨
const getSchoolList = async (params) => {
    const response = await api.get('/designer/user/available/schools', { params });
    return response.data;
};

// ç»‘å®šé™¢æ ¡
const bindSchool = async (schoolId, studentId) => {
    const response = await api.post('/designer/user/bind/school', null, {
        params: { schoolId, studentId }
    });
    return response.data;
};
```

### 3. ç»‘å®šçŠ¶æ€æ£€æŸ¥
```javascript
// æ£€æŸ¥ç”¨æˆ·ç»‘å®šçŠ¶æ€
const checkBindingStatus = async () => {
    const response = await api.get('/designer/user/bindings');
    const bindings = response.data.data;
    
    return {
        hasDesigner: bindings.some(b => b.entityType === 'designer'),
        hasEnterprise: bindings.some(b => b.entityType === 'enterprise'),
        hasSchool: bindings.some(b => b.entityType === 'school')
    };
};
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

ç»‘å®šå…³ç³»é€šè¿‡ `des_user_binding` è¡¨ç®¡ç†ï¼š

```sql
CREATE TABLE `des_user_binding` (
    `binding_id` BIGINT NOT NULL AUTO_INCREMENT COMMENT 'ç»‘å®šID',
    `user_id` BIGINT NOT NULL COMMENT 'ç”¨æˆ·ID',
    `entity_type` VARCHAR(20) NOT NULL COMMENT 'å®ä½“ç±»å‹ï¼ˆdesigner/enterprise/schoolï¼‰',
    `entity_id` BIGINT NOT NULL COMMENT 'å®ä½“ID',
    `binding_status` CHAR(1) DEFAULT '1' COMMENT 'ç»‘å®šçŠ¶æ€ï¼ˆ0è§£ç»‘ 1ç»‘å®šï¼‰',
    `create_time` DATETIME COMMENT 'åˆ›å»ºæ—¶é—´',
    `update_time` DATETIME COMMENT 'æ›´æ–°æ—¶é—´',
    PRIMARY KEY (`binding_id`),
    UNIQUE KEY `uk_user_entity` (`user_id`, `entity_type`),
    INDEX `idx_user_id` (`user_id`),
    INDEX `idx_entity` (`entity_type`, `entity_id`)
);
```

## ğŸ¯ æ€»ç»“

é€šè¿‡ä»¥ä¸Šæ¥å£ï¼Œç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°ï¼š

1. **æµè§ˆç³»ç»Ÿä¸­çš„ä¼ä¸šå’Œé™¢æ ¡**
2. **é€‰æ‹©åˆé€‚çš„å®ä½“è¿›è¡Œç»‘å®š**
3. **ç®¡ç†è‡ªå·±çš„èº«ä»½ç»‘å®šå…³ç³»**
4. **åœ¨ä¸åŒèº«ä»½é—´åˆ‡æ¢**

è¿™ç§è®¾è®¡æ—¢ä¿æŒäº†ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œåˆç¡®ä¿äº†æ•°æ®çš„ä¸€è‡´æ€§å’Œå®‰å…¨æ€§ã€‚ 