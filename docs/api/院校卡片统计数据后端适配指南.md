# 院校卡片统计数据后端适配指南

## 概述

前端院校卡片组件需要显示就业率、师资力量评分、学生评分和优势专业等统计数据。为了提升用户体验和减少API请求次数，建议后端在现有的 `/designer/school/list` 接口中直接返回这些统计数据。

## 当前状态

### 前端适配情况 ✅
- 已修改 `School` 接口，添加了卡片统计字段
- 已修改 `SchoolCard.vue` 组件，优先使用后端数据
- 当后端未提供数据时，显示默认值（如："--"、"待完善"）

### 后端适配情况 ❌
- `/designer/school/list` 接口暂未返回统计数据字段
- 前端当前显示默认值

## 需要修改的接口

### 主要接口：`GET /designer/school/list`

**当前返回数据结构**：
```json
{
  "total": 11,
  "rows": [
    {
      "schoolName": "同济大学",
      "description": "同济大学设计创意学院致力于培养具有国际视野的创新设计人才。",
      "schoolType": "COMPREHENSIVE",
      "province": "上海市",
      "city": "杨浦区",
      "ranking": 8,
      "isKey": true,
      "is985": true,
      "is211": true,
      "isDoubleFirst": true
      // ... 其他现有字段
    }
  ],
  "code": 200,
  "msg": "查询成功"
}
```

**需要添加的字段**：
```json
{
  "total": 11,
  "rows": [
    {
      "schoolName": "同济大学",
      "description": "同济大学设计创意学院致力于培养具有国际视野的创新设计人才。",
      "schoolType": "COMPREHENSIVE",
      "province": "上海市",
      "city": "杨浦区",
      "ranking": 8,
      "isKey": true,
      "is985": true,
      "is211": true,
      "isDoubleFirst": true,
      // 新增卡片统计数据字段
      "employmentRate": "96.8%", // 就业率
      "facultyStrength": "5.0", // 师资力量评分
      "studentScore": "4.9", // 学生评分
      "advantagePrograms": "信息艺术设计、智能产品设计、交互设计" // 优势专业
      // ... 其他现有字段
    }
  ],
  "code": 200,
  "msg": "查询成功"
}
```

## 字段说明

| 字段名 | 类型 | 说明 | 示例值 | 是否必需 |
|--------|------|------|--------|----------|
| `employmentRate` | string | 就业率，包含百分号 | "96.8%" | 可选 |
| `facultyStrength` | string | 师资力量评分（1.0-5.0） | "5.0" | 可选 |
| `studentScore` | string | 学生评分（1.0-5.0） | "4.9" | 可选 |
| `advantagePrograms` | string | 优势专业，多个专业用中文逗号分隔 | "信息艺术设计、智能产品设计、交互设计" | 可选 |

## 数据获取建议

### 1. 就业率 (employmentRate)
- 可从就业统计表中计算最近一年的就业率
- 格式：保留一位小数 + 百分号，如 "96.8%"
- 计算公式：(已就业人数 / 毕业生总数) × 100%

### 2. 师资力量评分 (facultyStrength)
- 可根据教授/副教授比例、博士学位比例、海外背景比例等综合计算
- 格式：保留一位小数，如 "5.0"
- 评分范围：1.0 - 5.0

### 3. 学生评分 (studentScore)
- 可从学生评价系统中计算平均分
- 格式：保留一位小数，如 "4.9"
- 评分范围：1.0 - 5.0

### 4. 优势专业 (advantagePrograms)
- 可根据专业排名、就业率、获奖情况等综合评定
- 格式：专业名称用中文逗号分隔，如 "信息艺术设计、智能产品设计、交互设计"
- 建议显示3-5个核心优势专业

## 前端兼容性

### 向后兼容
- 前端已做好兼容处理，如果后端不返回这些字段，会显示默认值
- 不会影响现有功能的正常使用

### 字段处理逻辑
```typescript
// 前端处理逻辑示例
const formatEmploymentRate = (school: School) => {
  if (school.employmentRate) {
    return school.employmentRate    // 使用后端数据
  } else {
    return '--'                     // 显示默认值
  }
}
```

## 实施步骤

### 阶段一：基础适配 (建议立即实施)
1. 修改 `/designer/school/list` 接口，添加上述四个字段
2. 初期可以使用模拟数据或简单计算
3. 确保字段格式符合前端要求

### 阶段二：数据完善 (后续优化)
1. 建立相关统计数据表
2. 实现定时任务更新统计数据
3. 优化计算算法，提供更准确的评分

### 阶段三：性能优化 (可选)
1. 对统计数据建立缓存
2. 考虑分页时的数据预加载
3. 优化数据库查询性能

## 测试验证

### 1. 接口测试
```bash
# 测试接口返回数据
GET /designer/school/list?pageNum=1&pageSize=10
```

### 2. 前端验证
- 确认卡片显示正确的统计数据
- 验证数据格式符合预期
- 测试缺失字段的兼容性

## 注意事项

1. **字段可选性**：所有新增字段都是可选的，不会影响现有功能
2. **数据格式**：严格按照示例格式返回，特别是百分号和小数位数
3. **性能影响**：建议通过缓存或预计算来避免实时计算带来的性能问题
4. **数据一致性**：确保不同接口返回的相同数据保持一致

## 联系方式

如有疑问，请联系前端开发团队进行确认。

---

**文档版本**：v1.0
**创建时间**：2024年12月
**更新时间**：2024年12月
